<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Gestão de Notas</title>
</head>
<body>
	<ui:include src="/navbar.xhtml" />
    
	<h1>Gestão de Notas</h1>
	<h:form id="form">
	
        
		<h:panelGrid columns="2">
			<h:outputLabel value="AlunoID" />
			<h:inputText value="#{notaMB.aluno.id}" />
			<h:outputLabel value="Disciplina" />
			<h:inputText value="#{notaMB.nota.disciplina}" />
			<h:outputLabel value="Professor" />
			<h:inputText value="#{notaMB.nota.professor}" />
			<h:outputLabel value="Nota" />
			<h:inputText value="#{notaMB.nota.nota}" />
			<h:commandButton value="Salvar" action="#{notaMB.save}">
				<f:ajax render="@form tabelaNota" />
			</h:commandButton>
			<h:commandButton value="Limpar" action="#{notaMB.clearForm}">
				<f:ajax render="@form" />
			</h:commandButton>
		</h:panelGrid>

	<h1>Lista de Notas</h1>
	<h:dataTable value="#{notaMB.notas}" var="n" border="2"
		id="tabelaNota">
		<h:column headerText="Data">#{n.data}</h:column>
		<h:column headerText="Aluno">#{n.aluno.nome}</h:column>
		<h:column headerText="Disciplina">#{n.disciplina}</h:column>
		<h:column headerText="Professor">#{n.professor}</h:column>
		<h:column headerText="Nota">#{n.nota}</h:column>
		<h:column headerText="Ações" width="150">
			<h:commandButton value="Editar" action="#{notaMB.edit(n)}">
				<f:ajax render="@form" />
			</h:commandButton>
			<h:commandButton value="Excluir" action="#{notaMB.remove}">
				<f:setPropertyActionListener value="#{n}" target="#{notaMB.nota}" />
				<f:ajax render="@form tabelaNota" />
			</h:commandButton>
		</h:column>
	</h:dataTable>
	</h:form>

</body>
</html>