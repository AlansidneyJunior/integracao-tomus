<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Gestão de Notas</title>
	<style>
	body {
		margin: 20px;
		font-family: Arial, sans-serif;
	}
	
	h1 {
		color: #333;
		text-align: center;
		margin-bottom: 20px;
	}
	
	p:panelGrid {
		margin-bottom: 20px;
	}
	</style>
</head>
<body>
	<h:head />
	<ui:include src="/navbar.xhtml" />

	<h1>Gestão de Notas</h1>
	<h:form id="form">
		<p:panelGrid columns="2">
			<p:outputLabel value="AlunoID" />
			<p:inputText value="#{notaMB.aluno.id}" />
			<p:outputLabel value="Disciplina" />
			<p:inputText value="#{notaMB.nota.disciplina}" />
			<p:outputLabel value="Professor" />
			<p:inputText value="#{notaMB.nota.professor}" />
			<p:outputLabel value="Nota" />
			<p:inputText value="#{notaMB.nota.nota}" />
			<p:commandButton value="Salvar" action="#{notaMB.save}" update="tabelaNota form">
				<f:ajax render="@form tabelaNota" />
			</p:commandButton>
			<p:commandButton value="Limpar" action="#{notaMB.clearForm}" update="tabelaNota form">
				<f:ajax render="@form" />
			</p:commandButton>
		</p:panelGrid>

		<h1>Lista de Notas</h1>
		<p:dataTable value="#{notaMB.notas}" var="n" border="2"
			id="tabelaNota">
			<p:column headerText="Data">#{n.data}</p:column>
			<p:column headerText="Aluno">#{n.aluno.nome}</p:column>
			<p:column headerText="Disciplina">#{n.disciplina}</p:column>
			<p:column headerText="Professor">#{n.professor}</p:column>
			<p:column headerText="Nota">#{n.nota}</p:column>
			<p:column headerText="Ações" width="150">
				<p:commandButton value="Editar" action="#{notaMB.edit(n)}" update="tabelaNota form">
					<f:ajax render="@form" />
				</p:commandButton>
				<p:commandButton value="Excluir" action="#{notaMB.remove}">
					<f:setPropertyActionListener value="#{n}" target="#{notaMB.nota}" update="tabelaNota form"/>
					<f:ajax render="@form tabelaNota" />
				</p:commandButton>
			</p:column>
		</p:dataTable>
	</h:form>

</body>
</html>